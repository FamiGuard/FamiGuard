"use strict";var contactUs=function(){var nowSitme=void 0,time=void 0,productData=[];var updateNowSitme=function updateNowSitme(){nowSitme=md5Token.sitme()};var alerts={load:function load(){$("body").append('<div class="load"><img src="https://images.imyfone.com/famiguarden/assets/common/loading.gif" alt="load"></div>')},close:function close(){$(".load").remove()},msg:function msg(_msg){$("body").append("<div class=\"load\"><p class=\"alertmsg\">"+_msg+"</p></div>");setTimeout(function(){alerts.close()},2000)}};var captcha=function captcha(){time=new Date().getTime();$("#captcha_img_two").attr("src",base.cmsApiUrl()+"/api/captcha?t="+time)};var getProduct=function getProduct(){updateNowSitme();$.ajax({type:"POST",dataType:"json",url:"https://api.imyfone.com/v1/get_product",headers:{Authorization:"Bearer 7c4a8d09ca3762af61e59520943dc26494f8941b"},data:{information_sources:"www.famiguard.com"},success:function success(res){var data=res.data,code=res.code,msg=res.msg;if(code==200){productData=data;var productHtml="";productData.forEach(function(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:item,id=_ref.id,product_name=_ref.product_name;productHtml+="<option value=\""+id+"\">"+product_name+"</option>"});$("#product").html(productHtml)}else{alerts.msg(msg)}},error:function error(res){var msg=res.msg;alerts.msg(msg)}})};var postProductInfo=function postProductInfo(){var checkSubmitFlg=!1;$('#contactus-form').validate({errorPlacement:function errorPlacement(error,element){error.appendTo(element.parents().children('.p_error'))},rules:{subject:{required:!0,maxlength:200},uname:{required:!0,maxlength:200},uemail:{required:!0,email:!0,maxlength:200},message:{required:!0,maxlength:300},captcha:{required:!0}},messages:{subject:{required:'Please fill in subject!',maxlength:'error!'},uname:{required:'Please fill in your name!',maxlength:'error!'},uemail:{required:'Please fill in the right Email!',email:'Please enter a valid email address!',maxlength:'error!'},message:{required:'Please fill in your message!',maxlength:'error!'},captcha:{required:'Please fill in the captcha!'}},submitHandler:function submitHandler(form){if(checkSubmitFlg){return!1}
checkSubmitFlg=!0;setTimeout(function(){checkSubmitFlg=!1},5000);var data={'subject':$('#subject').val(),'name':$('#uname').val(),'email':$('#uemail').val(),'content':$('#message').val(),'question_type_name':$('#purchase').val(),'pid':$('#product').val(),'code':$('#captcha').val(),site_name:"famiguard_en",'t':time};alerts.load();updateNowSitme();$.ajax({type:"POST",url:base.cmsApiUrl()+"/api/cbs/contactus",headers:{'token':md5Token.token(nowSitme),'stime':nowSitme},data:data,success:function success(result){alerts.close();var code=result.code,msg=result.msg;if(code==1){$(".success-alert").show()}else{alerts.msg(msg)}
checkSubmitFlg=!1;captcha()}})}});$(".success-alert-close").on("click",function(){$(".success-alert").hide();window.location.reload()})};var init=function init(){getProduct();captcha();postProductInfo()};return{init:init,captcha:captcha}}();contactUs.init()